/* =====================================================================
   REKAP-RAB-PRINT.CSS - Rekap RAB Specific Print Styles
   File: detail_project/static/detail_project/css/print/rekap-rab-print.css
   
   Dependencies: print-base.css, print-theme.css, print-components.css
   
   Specific untuk halaman Rekap RAB dengan hierarki:
   - Level 1: Klasifikasi
   - Level 2: Sub-Klasifikasi  
   - Level 3: Pekerjaan
   ===================================================================== */

@media print {
  
  /* ============== REKAP RAB SPECIFIC LAYOUT ============== */
  
  /* Container */
  #rekap-app {
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
  }
  
  #rekap-table-wrap {
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    box-shadow: none !important;
  }
  
  /* ============== TABLE STRUCTURE ============== */
  
  #rekap-table {
    width: 100% !important;
    max-width: 100% !important;
    border-collapse: collapse !important;
    border-spacing: 0 !important;
    margin: 0 !important;
    page-break-inside: auto;
    font-size: 9pt;
    table-layout: fixed;
  }
  
  /* Column widths - optimized untuk A4 landscape */
  #rekap-table col.col-uraian { width: 35% !important; }
  #rekap-table col.col-kode   { width: 12% !important; }
  #rekap-table col.col-satuan { width: 8% !important; }
  #rekap-table col.col-volume { width: 10% !important; }
  #rekap-table col.col-harga  { width: 15% !important; }
  #rekap-table col.col-total  { width: 20% !important; }
  
  /* ============== TABLE HEADER ============== */
  
  #rekap-table thead {
    display: table-header-group;
  }
  
  #rekap-table thead th {
    background: var(--print-primary) !important;
    color: var(--print-white) !important;
    font-weight: bold !important;
    font-size: 9pt !important;
    text-align: center !important;
    vertical-align: middle !important;
    padding: 3mm 2mm !important;
    border: 1pt solid var(--print-primary-dark) !important;
    text-transform: uppercase;
    letter-spacing: 0.3pt;
    position: static !important;
  }
  
  #rekap-table thead th:first-child {
    text-align: left !important;
  }
  
  /* ============== TABLE BODY ============== */
  
  #rekap-table tbody {
    display: table-row-group;
  }
  
  #rekap-table tbody td {
    padding: 2.5mm 2mm !important;
    border: 0.5pt solid var(--print-border-color) !important;
    vertical-align: middle !important;
    font-size: 9pt !important;
    background: var(--print-white) !important;
    color: var(--print-black) !important;
  }
  
  /* ============== PAGE BREAK CONTROL ============== */
  
  #rekap-table tr {
    page-break-inside: avoid !important;
    page-break-after: auto;
  }
  
  /* Avoid breaking after headers */
  #rekap-table tbody tr[data-level="1"],
  #rekap-table tbody tr[data-level="2"] {
    page-break-after: avoid !important;
  }
  
  /* ============== HIERARCHICAL STYLING ============== */
  
  /* LEVEL 1: KLASIFIKASI - Dark header */
  #rekap-table tbody tr[data-level="1"] td {
    background: var(--print-primary) !important;
    color: var(--print-white) !important;
    font-weight: bold !important;
    font-size: 10pt !important;
    padding: 3mm 2mm !important;
    border: 1pt solid var(--print-primary-dark) !important;
    text-transform: uppercase;
    letter-spacing: 0.3pt;
  }
  
  #rekap-table tbody tr[data-level="1"] td:first-child {
    padding-left: 3mm !important;
  }
  
  /* LEVEL 2: SUB-KLASIFIKASI - Light gray */
  #rekap-table tbody tr[data-level="2"] td {
    background: var(--print-gray-200) !important;
    color: var(--print-black) !important;
    font-weight: 600 !important;
    font-size: 9pt !important;
    padding: 2.5mm 2mm !important;
    border: 0.5pt solid var(--print-border-color) !important;
  }
  
  #rekap-table tbody tr[data-level="2"] td:first-child {
    padding-left: 6mm !important;
  }
  
  /* LEVEL 3: PEKERJAAN - White background */
  #rekap-table tbody tr[data-level="3"] td {
    background: var(--print-white) !important;
    color: var(--print-black) !important;
    font-weight: normal !important;
    font-size: 9pt !important;
    padding: 2mm !important;
    border: 0.5pt solid var(--print-gray-300) !important;
  }
  
  #rekap-table tbody tr[data-level="3"] td:first-child {
    padding-left: 10mm !important;
  }
  
  /* Kode column - monospace font */
  #rekap-table tbody tr[data-level="3"] td:nth-child(2) {
    font-family: 'Courier New', 'Consolas', monospace;
    font-size: 8pt !important;
    color: var(--print-primary) !important;
  }
  
  /* ============== NUMERIC COLUMNS ============== */
  
  #rekap-table tbody td:nth-child(4),
  #rekap-table tbody td:nth-child(5),
  #rekap-table tbody td:nth-child(6),
  #rekap-table thead th:nth-child(4),
  #rekap-table thead th:nth-child(5),
  #rekap-table thead th:nth-child(6) {
    text-align: right !important;
    font-variant-numeric: tabular-nums;
    font-family: 'Arial', sans-serif;
  }
  
  /* ============== FOOTER ROWS (Injected by JS) ============== */
  
  /* Hide original tfoot */
  #rekap-table tfoot {
    display: none !important;
  }
  
  /* Footer rows in tbody */
  #rekap-table tbody tr.print-footer-row td {
    background: var(--print-gray-100) !important;
    border: 1pt solid var(--print-primary) !important;
    padding: 3mm 2mm !important;
    font-weight: 600 !important;
    font-size: 10pt !important;
    color: var(--print-black) !important;
    page-break-inside: avoid !important;
  }
  
  /* Separator before footer */
  #rekap-table tbody tr.print-footer-row:first-of-type td {
    border-top: 2pt solid var(--print-primary) !important;
    padding-top: 4mm !important;
    margin-top: 3mm;
  }
  
  /* Grand Total row - highlighted */
  #rekap-table tbody tr.print-footer-grand td {
    background: var(--print-accent) !important;
    color: var(--print-white) !important;
    font-weight: bold !important;
    font-size: 11pt !important;
    padding: 4mm 2mm !important;
    border: 1.5pt solid var(--print-accent-dark) !important;
    text-transform: uppercase;
  }
  
  /* ============== HIDE INTERACTIVE ELEMENTS ============== */
  
  #rekap-table .toggle,
  #rekap-table button,
  #rekap-table input,
  #rekap-table select,
  #rekap-table .input-group,
  #rekap-table .form-control,
  #rekap-table .form-select,
  #rekap-table .btn {
    display: none !important;
  }
  
  /* ============== EMPTY STATES ============== */
  
  #rekap-table tbody tr#rab-loading {
    display: none !important;
  }
  
  /* ============== TEXT FORMATTING ============== */
  
  /* Remove search highlights */
  .rab-hit {
    background: transparent !important;
    font-weight: inherit !important;
    padding: 0 !important;
  }
  
  /* ============== VISIBILITY RULES ============== */
  
  /* Hide collapsed rows */
  #rekap-table tbody tr.d-none,
  #rekap-table tbody tr[style*="display: none"] {
    display: none !important;
  }
  
  /* Show visible rows */
  #rekap-table tbody tr:not(.d-none):not([style*="display: none"]) {
    display: table-row !important;
  }
  
  /* ============== OPTIONAL: ZEBRA STRIPING ============== */
  
  /* Uncomment jika ingin zebra stripes pada level 3 */
  /*
  #rekap-table tbody tr[data-level="3"]:nth-child(even) td {
    background: var(--print-gray-100) !important;
  }
  */
  
  /* ============== PRINT QUALITY OPTIMIZATION ============== */
  
  /* Ensure crisp borders */
  #rekap-table,
  #rekap-table td,
  #rekap-table th {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }
  
  /* Text rendering */
  #rekap-table {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* ============== SCREEN-ONLY STYLES ============== */
@media screen {
  /* Print-specific classes hidden on screen */
  .print-footer-row,
  .print-footer-grand {
    /* Will be added dynamically by JS */
  }
}