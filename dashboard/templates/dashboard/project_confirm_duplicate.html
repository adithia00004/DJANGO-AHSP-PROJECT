{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block title %}Duplikasi Proyek{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header bg-warning text-dark">
      <h5 class="mb-0">
        <i class="fas fa-clone"></i> Duplikasi & Edit Proyek
      </h5>
    </div>
    <div class="card-body">
      <p>Anda sedang membuat salinan dari proyek: <strong>{{ original_project.nama }}</strong>. Silakan ubah detailnya sebelum menyimpan.</p>

      <form method="post">
        {% csrf_token %}

        <!-- === NAVIGATION TABS === -->
        <ul class="nav nav-tabs mb-3" id="projectTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="identitas-tab" data-bs-toggle="tab" data-bs-target="#identitas" type="button" role="tab">
              <b>IDENTITAS PROJECT</b>
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="pemilik-tab" data-bs-toggle="tab" data-bs-target="#pemilik" type="button" role="tab">
              <b>PEMILIK PROJECT</b>
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="tim-tab" data-bs-toggle="tab" data-bs-target="#tim" type="button" role="tab">
              <B>TIM PROFESSIONAL</B>
            </button>
          </li>
        </ul>

        <!-- === TAB CONTENT === -->
        <div class="tab-content" id="projectTabContent">

          <!-- TAB 1: IDENTITAS PROYEK -->
          <div class="tab-pane fade show active" id="identitas" role="tabpanel">
            <div class="row">
              <div class="col-md-6 mb-3">{{ form.nama.label_tag }} {{ form.nama }}</div>
              <div class="col-md-6 mb-3">{{ form.tahun_project.label_tag }} {{ form.tahun_project }}</div>
              <div class="col-md-6 mb-3">{{ form.lokasi_project.label_tag }} {{ form.lokasi_project }}</div>
              <div class="col-md-6 mb-3">{{ form.anggaran_owner.label_tag }} {{ form.anggaran_owner }}</div>
              <div class="col-md-6 mb-3">{{ form.ket_project1.label_tag }} {{ form.ket_project1 }}</div>
              <div class="col-md-6 mb-3">{{ form.ket_project2.label_tag }} {{ form.ket_project2 }}</div>
              <div class="col-md-12 mb-3">{{ form.deskripsi.label_tag }} {{ form.deskripsi }}</div>
              <div class="col-md-6 mb-3">{{ form.kategori.label_tag }} {{ form.kategori }}</div>
            </div>
          </div>

          <!-- TAB 2: PEMILIK PROYEK -->
          <div class="tab-pane fade" id="pemilik" role="tabpanel">
            <div class="row">
              <div class="col-md-6 mb-3">{{ form.nama_client.label_tag }} {{ form.nama_client }}</div>
              <div class="col-md-6 mb-3">{{ form.instansi_client.label_tag }} {{ form.instansi_client }}</div>
              <div class="col-md-6 mb-3">{{ form.sumber_dana.label_tag }} {{ form.sumber_dana }}</div>
            </div>
          </div>

          <!-- TAB 3: TIM PROFESIONAL -->
          <div class="tab-pane fade" id="tim" role="tabpanel">
            <div class="row">
              <div class="col-md-6 mb-3">{{ form.nama_kontraktor.label_tag }} {{ form.nama_kontraktor }}</div>
              <div class="col-md-6 mb-3">{{ form.instansi_kontraktor.label_tag }} {{ form.instansi_kontraktor }}</div>
              <div class="col-md-6 mb-3">{{ form.nama_konsultan_perencana.label_tag }} {{ form.nama_konsultan_perencana }}</div>
              <div class="col-md-6 mb-3">{{ form.instansi_konsultan_perencana.label_tag }} {{ form.instansi_konsultan_perencana }}</div>
              <div class="col-md-6 mb-3">{{ form.nama_konsultan_pengawas.label_tag }} {{ form.nama_konsultan_pengawas }}</div>
              <div class="col-md-6 mb-3">{{ form.instansi_konsultan_pengawas.label_tag }} {{ form.instansi_konsultan_pengawas }}</div>
            </div>
          </div>
        </div>

        <!-- === ACTION BUTTONS === -->
        <div class="d-flex justify-content-between mt-4">
          <a href="{% url 'dashboard:dashboard' %}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Batal
          </a>
          <button type="submit" class="btn btn-success">
            <i class="fas fa-copy"></i> Simpan Duplikat
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
